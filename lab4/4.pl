% рекурсивный перебор значений
значение(1).
значение(2).
значение(3).

% рекурсивное заполнение списка
заполнить([]).
заполнить([Голова|Хвост]) :-
    значение(Голова),
    заполнить(Хвост).

% вывод строки из трёх элементов
вывести_строку(A, B, C) :-
    write(A), write('  '),
    write(B), write('  '),
    write(C), nl.

% вывод всей матрицы
показать(Э11,Э12,Э13,
        Э21,Э22,Э23,
        Э31,Э32,Э33) :-
    nl,
    write('Решение:'), nl,
    вывести_строку(Э11,Э12,Э13),
    вывести_строку(Э21,Э22,Э23),
    вывести_строку(Э31,Э32,Э33),
    nl.

% основное решение
решение(Э11,Э12,Э13,
        Э21,Э22,Э23,
        Э31,Э32,Э33) :-

    Список = [Э11,Э12,Э13,
              Э21,Э22,Э23,
              Э31,Э32,Э33],

    заполнить(Список),

    % суммы строк
    С1 is Э11 + Э12 + Э13,
    С2 is Э21 + Э22 + Э23,
    С3 is Э31 + Э32 + Э33,

    % суммы столбцов
    C1 is Э11 + Э21 + Э31,
    C2 is Э12 + Э22 + Э32,
    C3 is Э13 + Э23 + Э33,

    % диагонали
    D1 is Э11 + Э22 + Э33,
    D2 is Э13 + Э22 + Э31,

    % равенство всех сумм
    С1 = С2, С2 = С3,
    С3 = C1, C1 = C2,
    C2 = C3, C3 = D1,
    D1 = D2,

    % вывод матрицы
    показать(Э11,Э12,Э13,
             Э21,Э22,Э23,
             Э31,Э32,Э33).
